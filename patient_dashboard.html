<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Health Dashboard - DHRMS</title>
    <link rel="stylesheet" href="patient_dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Kerala_Government_Logo.svg/1200px-Kerala_Government_Logo.svg.png" alt="Logo" class="logo-small">
                <span>DHRMS Kerala</span>
            </div>
            <nav class="sidebar-nav">
                <a href="patient_dashboard.html" class="nav-link active"><i class="fa-solid fa-table-columns"></i> Dashboard</a>
                <a href="medical_history.html" class="nav-link"><i class="fa-solid fa-file-medical"></i> Medical History</a>
                <a href="my_appointments.html" class="nav-link"><i class="fa-solid fa-calendar-check"></i> My Appointments</a>
                <a href="my_documents.html" class="nav-link"><i class="fa-solid fa-folder-open"></i> My Documents</a>
                <a href="edit_profile.html" class="nav-link"><i class="fa-solid fa-user-pen"></i> Edit Profile</a>
                <a href="helpline.html" class="nav-link"><i class="fa-solid fa-headset"></i> Helpline</a>
            </nav>
            <div class="sidebar-footer">
                <div class="user-profile">
                    <img src="https://i.imgur.com/T5f2v2s.png" alt="User Avatar" class="avatar">
                    <div class="user-details">
                        <p class="user-name">Rahul Kumar</p>
                        <small class="user-role">Patient ID: KMW-2025-8451</small>
                    </div>
                    <a href="index.html" class="logout-icon" title="Logout">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </a>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <header class="main-header-content">
                <h1>Welcome, Rahul Kumar</h1>
                <p>Here is a summary of your health record.</p>
            </header>

            <section class="profile-summary-card">
                <div class="profile-photo">
                    <img src="https://i.imgur.com/T5f2v2s.png" alt="Patient Photo">
                </div>
                <div class="profile-details">
                    <h2>Rahul Kumar</h2>
                    <p><strong>Health ID:</strong> KMW-2025-8451</p>
                    <div class="details-grid">
                        <p><strong>Age:</strong> 32</p>
                        <p><strong>Gender:</strong> Male</p>
                        <p><strong>Blood Group:</strong> O+</p>
                        <p><strong>Contact:</strong> 98********</p>
                    </div>
                </div>
                <div class="profile-actions">
                    <button id="showQrButton" class="btn btn-primary"><i class="fa-solid fa-qrcode"></i> View Health ID Card</button>
                    <a href="edit_profile.html" class="btn btn-secondary">Update Profile</a>
                </div>
            </section>

            <section class="dashboard-grid patient-grid">
                <div class="grid-card">
                    <h3><i class="fa-solid fa-calendar-alt"></i> Upcoming Appointment</h3>
                    <div class="appointment-details">
                        <p><strong>Doctor:</strong> Dr. Priya Nair (General Physician)</p>
                        <p><strong>Date:</strong> 20th September 2025, 10:00 AM</p>
                        <p><strong>Location:</strong> Primary Health Centre, Aluva</p>
                        <p><strong>Reason:</strong> Follow-up for fever</p>
                    </div>
                    <a href="my_appointments.html" class="card-link">Manage Appointments</a>
                </div>

                <div class="grid-card">
                    <h3><i class="fa-solid fa-bell"></i> Health Alerts & Reminders</h3>
                    <ul class="alerts-list">
                        <li><i class="fa-solid fa-triangle-exclamation"></i> Follow-up for fever check is due.</li>
                        <li><i class="fa-solid fa-syringe"></i> Tetanus (TT) booster dose recommended.</li>
                        <li><i class="fa-solid fa-pills"></i> Remember to take your daily medication.</li>
                    </ul>
                     <a href="#" class="card-link">View All Alerts</a>
                </div>

                <div class="grid-card full-width">
                    <h3><i class="fa-solid fa-notes-medical"></i> Recent Medical History</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Date of Visit</th>
                                <th>Doctor Consulted</th>
                                <th>Diagnosis / Reason</th>
                                <th>Documents</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>14 Sep 2025</td>
                                <td>Dr. Priya Nair</td>
                                <td>Viral Fever</td>
                                <td><a href="#" class="btn-view">View Prescription</a></td>
                            </tr>
                            <tr>
                                <td>02 Aug 2025</td>
                                <td>Dr. S. Menon</td>
                                <td>Routine Check-up</td>
                                <td><a href="#" class="btn-view">View Lab Report</a></td>
                            </tr>
                            <tr>
                                <td>15 May 2025</td>
                                <td>Health Camp</td>
                                <td>Vaccination (COVID-19 Booster)</td>
                                <td><a href="#" class="btn-view">View Certificate</a></td>
                            </tr>
                        </tbody>
                    </table>
                     <a href="medical_history.html" class="card-link">View Full Medical History</a>
                </div>
            </section>
        </main>
    </div>

    <div id="qrModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>Your Digital Health ID Card</h3>
            <p>Show this QR code at any health center for quick identification.</p>
            <div id="qrcode-container"></div> <div class="modal-details">
                <p><strong>Name:</strong> Rahul Kumar</p>
                <p><strong>Health ID:</strong> <span id="modalHealthId">KMW-2025-8451</span></p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script>
        // Get modal elements
        const modal = document.getElementById('qrModal');
        const showQrButton = document.getElementById('showQrButton');
        const closeButton = document.querySelector('.close-button');
        const healthId = document.getElementById('modalHealthId').textContent;

        // --- Generate the QR Code ---
        new QRCode(document.getElementById("qrcode-container"), {
            text: healthId,
            width: 200,
            height: 200,
            colorDark : "#000000",
            colorLight : "#ffffff",
            correctLevel : QRCode.CorrectLevel.H
        });

        // --- Modal functionality ---
        showQrButton.onclick = function() {
            modal.style.display = "block";
        }
        closeButton.onclick = function() {
            modal.style.display = "none";
        }
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
